<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Interactive HTML Creator</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #canvas {
            width: 100%;
            height: 100%;
            background-color: #f4f4f4;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .element {
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            background-color: lightblue;
            border: 2px solid #ccc;
            cursor: move;
            user-select: none;
            box-sizing: border-box;
        }
        .bar {
            padding: 5px;
            margin: 5px 0;
            border: 1px solid #000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .element img {
            max-width: 100px;
            max-height: 100px;
        }
        #options {
            position: fixed;
            top: 20px;
            left: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border: 1px solid #ccc;
            display: none;
            z-index: 10;
        }
        #doneBtn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #28a745;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
        }
        .input-field {
            margin: 5px 0;
        }
    </style>
</head>
<body>

<div id="canvas"></div>

<div id="options">
    <button onclick="addElement('header')">Add Header</button>
    <button onclick="addElement('logo')">Add Logo</button>
    <button onclick="addElement('text')">Add Text</button>
    <button onclick="addElement('button')">Add Button</button>
    <button onclick="addSection()">Add Section</button>
</div>

<button id="doneBtn">Done</button>

<script>
    let selectedElement = null;
    const canvas = document.getElementById('canvas');
    const options = document.getElementById('options');
    
    // Show options on canvas click
    canvas.addEventListener('click', (e) => {
        const x = e.clientX;
        const y = e.clientY;
        
        options.style.left = `${x + 20}px`;
        options.style.top = `${y + 20}px`;
        options.style.display = 'block';
    });

    window.addEventListener('click', (e) => {
        if (!options.contains(e.target) && e.target !== canvas) {
            options.style.display = 'none';
        }
    });

    function addElement(type) {
        const element = document.createElement('div');
        element.classList.add('element');
        const bar = document.createElement('div');
        bar.classList.add('bar');
        
        switch (type) {
            case 'header':
                bar.innerHTML = "<h2>Click to edit header</h2>";
                bar.contentEditable = true;
                break;
            case 'logo':
                const logoUrl = prompt("Enter Google Drive Image Link:");
                if (logoUrl) {
                    bar.innerHTML = `<img src="${logoUrl}" alt="Logo" />`;
                }
                break;
            case 'text':
                bar.innerHTML = "Click to edit text";
                bar.contentEditable = true;
                break;
            case 'button':
                const buttonText = prompt("Enter Button Text:");
                const buttonLink = prompt("Enter Button Link (Optional):");
                bar.innerHTML = `<button onclick="window.open('${buttonLink}', '_blank')">${buttonText || 'Click Me'}</button>`;
                break;
        }

        bar.style.backgroundColor = "#fff";
        bar.style.width = "100%";
        bar.style.height = "100%";
        
        element.appendChild(bar);
        centerElement(element);
        makeDraggable(element);
        customizeElementOptions(element, bar);

        canvas.appendChild(element);
        options.style.display = 'none';
    }

    function centerElement(element) {
        element.style.display = "flex";
        element.style.justifyContent = "center";
        element.style.alignItems = "center";
    }

    function makeDraggable(element) {
        let offsetX, offsetY;
        element.addEventListener('mousedown', (e) => {
            selectedElement = element;
            offsetX = e.clientX - element.offsetLeft;
            offsetY = e.clientY - element.offsetTop;

            const moveElement = (moveEvent) => {
                selectedElement.style.left = `${moveEvent.clientX - offsetX}px`;
                selectedElement.style.top = `${moveEvent.clientY - offsetY}px`;
            };

            const stopMove = () => {
                document.removeEventListener('mousemove', moveElement);
                document.removeEventListener('mouseup', stopMove);
                selectedElement = null;
            };

            document.addEventListener('mousemove', moveElement);
            document.addEventListener('mouseup', stopMove);
        });
    }

    function customizeElementOptions(element, bar) {
        const panel = document.createElement('div');
        panel.classList.add('element-options');
        panel.style.position = 'absolute';
        panel.style.left = `${element.offsetLeft + 20}px`;
        panel.style.top = `${element.offsetTop + 20}px`;

        const widthField = createInput('number', 'Width', (value) => {
            element.style.width = `${value}px`;
        });
        
        const heightField = createInput('number', 'Height', (value) => {
            element.style.height = `${value}px`;
        });

        const bgBarColor = createInput('color', 'Bar Color', (value) => {
            bar.style.backgroundColor = value;
        });

        const fontSizeField = createInput('number', 'Font Size', (value) => {
            bar.style.fontSize = `${value}px`;
        });

        panel.appendChild(widthField);
        panel.appendChild(heightField);
        panel.appendChild(bgBarColor);
        panel.appendChild(fontSizeField);

        document.body.appendChild(panel);
    }

    function createInput(type, placeholder, callback) {
        const input = document.createElement('input');
        input.type = type;
        input.placeholder = placeholder;
        input.classList.add('input-field');
        input.addEventListener('input', (e) => callback(e.target.value));
        return input;
    }

    document.getElementById('doneBtn').addEventListener('click', () => {
        let htmlContent = '';
        document.querySelectorAll('.element').forEach(element => {
            htmlContent += element.outerHTML + '\n';
        });
        const htmlCode = `<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Custom Design</title></head><body>${htmlContent}</body></html>`;
        prompt("Copy your HTML code:", htmlCode);
    });
</script>

</body>
</html>