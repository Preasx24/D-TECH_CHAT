<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive HTML Creator</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #canvas {
            width: 100%;
            height: 100%;
            background-color: #f4f4f4;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .element {
            position: absolute;
            padding: 10px;
            background-color: lightblue;
            border: 2px solid #ccc;
            cursor: move;
            user-select: none;
        }
        .element img {
            max-width: 100px;
            max-height: 100px;
        }
        #options {
            position: fixed;
            top: 20px;
            left: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 10px;
            border: 1px solid #ccc;
            display: none;
            z-index: 10;
        }
        #doneBtn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #28a745;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div id="canvas"></div>

<div id="options">
    <button onclick="addElement('header')">Add Header</button>
    <button onclick="addElement('logo')">Add Logo</button>
    <button onclick="addElement('text')">Add Text</button>
    <button onclick="addElement('button')">Add Button</button>
</div>

<button id="doneBtn">Done</button>

<script>
    let selectedElement = null;
    const canvas = document.getElementById('canvas');
    const options = document.getElementById('options');
    
    // Show options when user clicks on the canvas
    canvas.addEventListener('click', (e) => {
        const x = e.clientX;
        const y = e.clientY;
        
        // Show the options near the click position
        options.style.left = `${x + 20}px`;
        options.style.top = `${y + 20}px`;
        options.style.display = 'block';
    });

    // Hide options when clicking anywhere outside
    window.addEventListener('click', (e) => {
        if (!options.contains(e.target) && e.target !== canvas) {
            options.style.display = 'none';
        }
    });

    // Add element to the canvas
    function addElement(type) {
        const element = document.createElement('div');
        element.classList.add('element');
        
        switch (type) {
            case 'header':
                element.innerHTML = "<h2>Click to edit header</h2>";
                element.contentEditable = true;
                break;
            case 'logo':
                element.innerHTML = "<img src='https://via.placeholder.com/100' alt='Logo' />";
                break;
            case 'text':
                element.innerHTML = "Click to edit text";
                element.contentEditable = true;
                break;
            case 'button':
                element.innerHTML = "<button>Click Me</button>";
                break;
        }

        // Position the element at the click position
        element.style.left = `${options.offsetLeft - canvas.offsetLeft}px`;
        element.style.top = `${options.offsetTop - canvas.offsetTop}px`;
        
        // Make it draggable on tap and hold
        let offsetX, offsetY;

        element.addEventListener('mousedown', (e) => {
            selectedElement = element;
            offsetX = e.clientX - element.offsetLeft;
            offsetY = e.clientY - element.offsetTop;

            const moveElement = (moveEvent) => {
                selectedElement.style.left = `${moveEvent.clientX - offsetX}px`;
                selectedElement.style.top = `${moveEvent.clientY - offsetY}px`;
            };

            const stopMove = () => {
                document.removeEventListener('mousemove', moveElement);
                document.removeEventListener('mouseup', stopMove);
                selectedElement = null;
            };

            document.addEventListener('mousemove', moveElement);
            document.addEventListener('mouseup', stopMove);
        });

        // Add the new element to the canvas
        canvas.appendChild(element);
        options.style.display = 'none'; // Hide options after adding an element
    }

    // Get the HTML code of the design with correct positioning
    document.getElementById('doneBtn').addEventListener('click', () => {
        let htmlContent = '';
        const elements = document.querySelectorAll('.element');

        elements.forEach(element => {
            const rect = element.getBoundingClientRect();
            const style = `position: absolute; left: ${rect.left}px; top: ${rect.top}px;`;
            const content = element.innerHTML;

            htmlContent += `<div style="${style}">${content}</div>\n`;
        });

        const htmlCode = `<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Custom Design</title></head><body>${htmlContent}</body></html>`;
        prompt("Copy your HTML code:", htmlCode);
    });
</script>

</body>
</html>