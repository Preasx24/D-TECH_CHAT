<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Interactive HTML Creator</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #canvas {
            width: 100%;
            height: 100%;
            background-color: #f4f4f4;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .element {
            position: absolute;
            padding: 10px;
            background-color: lightblue;
            border: 2px solid #ccc;
            cursor: move;
            user-select: none;
            box-sizing: border-box;
        }
        .element img {
            max-width: 100px;
            max-height: 100px;
        }
        #options {
            position: fixed;
            top: 20px;
            left: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 10px;
            border: 1px solid #ccc;
            display: none;
            z-index: 10;
        }
        #doneBtn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #28a745;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
        }
        .element-options {
            margin-top: 10px;
        }
        .input-field {
            margin: 5px 0;
        }
    </style>
</head>
<body>

<div id="canvas"></div>

<div id="options">
    <button onclick="addElement('header')">Add Header</button>
    <button onclick="addElement('logo')">Add Logo</button>
    <button onclick="addElement('text')">Add Text</button>
    <button onclick="addElement('button')">Add Button</button>
</div>

<button id="doneBtn">Done</button>

<script>
    let selectedElement = null;
    const canvas = document.getElementById('canvas');
    const options = document.getElementById('options');
    
    // Show options when user clicks on the canvas
    canvas.addEventListener('click', (e) => {
        const x = e.clientX;
        const y = e.clientY;
        
        // Show the options near the click position
        options.style.left = `${x + 20}px`;
        options.style.top = `${y + 20}px`;
        options.style.display = 'block';
    });

    // Hide options when clicking anywhere outside
    window.addEventListener('click', (e) => {
        if (!options.contains(e.target) && e.target !== canvas) {
            options.style.display = 'none';
        }
    });

    // Add element to the canvas
    function addElement(type) {
        const element = document.createElement('div');
        element.classList.add('element');
        
        const optionsPanel = createElementOptionsPanel(element);

        switch (type) {
            case 'header':
                element.innerHTML = "<h2>Click to edit header</h2>";
                element.contentEditable = true;
                break;
            case 'logo':
                element.innerHTML = "<img src='https://via.placeholder.com/100' alt='Logo' />";
                break;
            case 'text':
                element.innerHTML = "Click to edit text";
                element.contentEditable = true;
                break;
            case 'button':
                element.innerHTML = "<button>Click Me</button>";
                break;
        }

        // Position the element at the click position
        element.style.left = `${options.offsetLeft - canvas.offsetLeft}px`;
        element.style.top = `${options.offsetTop - canvas.offsetTop}px`;
        
        // Make it draggable on tap and hold
        let offsetX, offsetY;

        element.addEventListener('mousedown', (e) => {
            selectedElement = element;
            offsetX = e.clientX - element.offsetLeft;
            offsetY = e.clientY - element.offsetTop;

            const moveElement = (moveEvent) => {
                selectedElement.style.left = `${moveEvent.clientX - offsetX}px`;
                selectedElement.style.top = `${moveEvent.clientY - offsetY}px`;
            };

            const stopMove = () => {
                document.removeEventListener('mousemove', moveElement);
                document.removeEventListener('mouseup', stopMove);
                selectedElement = null;
            };

            document.addEventListener('mousemove', moveElement);
            document.addEventListener('mouseup', stopMove);
        });

        // Add the new element to the canvas
        canvas.appendChild(element);
        optionsPanel.style.display = 'block'; // Show the options panel for the selected element
        options.style.display = 'none'; // Hide options after adding an element
    }

    // Create an options panel for an element with various customization options
    function createElementOptionsPanel(element) {
        const panel = document.createElement('div');
        panel.classList.add('element-options');
        panel.style.position = 'absolute';
        panel.style.left = `${element.offsetLeft + 20}px`;
        panel.style.top = `${element.offsetTop + 20}px`;

        const widthField = document.createElement('input');
        widthField.classList.add('input-field');
        widthField.type = 'number';
        widthField.placeholder = 'Width';
        widthField.value = element.offsetWidth;
        widthField.addEventListener('input', (e) => {
            element.style.width = `${e.target.value}px`;
        });

        const heightField = document.createElement('input');
        heightField.classList.add('input-field');
        heightField.type = 'number';
        heightField.placeholder = 'Height';
        heightField.value = element.offsetHeight;
        heightField.addEventListener('input', (e) => {
            element.style.height = `${e.target.value}px`;
        });

        const colorPicker = document.createElement('input');
        colorPicker.classList.add('input-field');
        colorPicker.type = 'color';
        colorPicker.value = "#ADD8E6"; // Default light blue
        colorPicker.addEventListener('input', (e) => {
            element.style.backgroundColor = e.target.value;
        });

        const fontSizeField = document.createElement('input');
        fontSizeField.classList.add('input-field');
        fontSizeField.type = 'number';
        fontSizeField.placeholder = 'Font Size';
        fontSizeField.addEventListener('input', (e) => {
            element.style.fontSize = `${e.target.value}px`;
        });

        const fontFamilyField = document.createElement('select');
        fontFamilyField.classList.add('input-field');
        ['Arial', 'Verdana', 'Tahoma', 'Georgia', 'Times New Roman'].forEach((font) => {
            const option = document.createElement('option');
            option.value = font;
            option.textContent = font;
            fontFamilyField.appendChild(option);
        });
        fontFamilyField.addEventListener('change', (e) => {
            element.style.fontFamily = e.target.value;
        });

        panel.appendChild(widthField);
        panel.appendChild(heightField);
        panel.appendChild(colorPicker);
        panel.appendChild(fontSizeField);
        panel.appendChild(fontFamilyField);

        document.body.appendChild(panel);

        return panel;
    }

    // Get the HTML code of the design with correct positioning
    document.getElementById('doneBtn').addEventListener('click', () => {
        let htmlContent = '';
        const elements = document.querySelectorAll('.element');

        elements.forEach(element => {
            const rect = element.getBoundingClientRect();
            const style = `position: absolute; left: ${rect.left}px; top: ${rect.top}px; width: ${rect.width}px; height: ${rect.height}px; background-color: ${element.style.backgroundColor}; font-size: ${element.style.fontSize}; font-family: ${element.style.fontFamily};`;
            const content = element.innerHTML;

            htmlContent += `<div style="${style}">${content}</div>\n`;
        });

        const htmlCode = `<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Custom Design</title></head><body>${htmlContent}</body></html>`;
        prompt("Copy your HTML code:", htmlCode);
    });
</script>

</body>
</html>